{include="header"}

<script type="text/javascript">
   function delete_plugin(id)
   {
      if( confirm("¿Realmente desea eliminar el plugin?") )
         window.location.href = '{$fsc->url()}&delete='+id;
   }
</script>

<div class="container-fluid" style="margin-top: 10px;">
   <div class="row">
      <div class="col-sm-6">
         <div class="btn-group hidden-xs">
            <a class="btn btn-sm btn-default" href="{$fsc->url()}" title="Recargar la página">
               <span class="glyphicon glyphicon-refresh"></span>
            </a>
            {if condition="$fsc->page->is_default()"}
            <a class="btn btn-sm btn-default active" href="{$fsc->url()}&amp;default_page=FALSE" title="Desmarcar como página de inicio">
               <span class="glyphicon glyphicon-home"></span>
            </a>
            {else}
            <a class="btn btn-sm btn-default" href="{$fsc->url()}&amp;default_page=TRUE" title="Marcar como página de inicio">
               <span class="glyphicon glyphicon-home"></span>
            </a>
            {/if}
         </div>
      </div>
      <div class="col-sm-6 text-right">
         <h2 style="margin-top: 0px;">{$fsc->page->title}</h2>
      </div>
   </div>
</div>

<div role="tabpanel">
   <ul class="nav nav-tabs" role="tablist">
      <li role="presentation"{if condition="!$fsc->editar_plugin AND !$fsc->ver_plugin"} class="active"{/if}>
          <a href="#lista_plugins" aria-controls="lista_plugins" role="tab" data-toggle="tab">
            <span class="glyphicon glyphicon-list" aria-hidden="true"></span>
            <span class="hidden-xs"> &nbsp; Todos los plugins</span>
         </a>
      </li>
      <li role="presentation">
          <a href="#mis_plugins" aria-controls="mis_plugins" role="tab" data-toggle="tab">
            <span class="glyphicon glyphicon-user" aria-hidden="true"></span>
            <span class="hidden-xs"> &nbsp; Mis plugins</span>
         </a>
      </li>
      {if condition="$fsc->editar_plugin"}
      <li role="presentation" class="active">
         <a href="#editar" aria-controls="editar" role="tab" data-toggle="tab">
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
            <span class="hidden-xs"> &nbsp; Editar</span>
         </a>
      </li>
      {/if}
      {if condition="$fsc->ver_plugin"}
      <li role="presentation" class="active">
         <a href="#ver" aria-controls="ver" role="tab" data-toggle="tab">
            <span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span>
            <span class="hidden-xs"> &nbsp; Ver</span>
         </a>
      </li>
      {/if}
      <li role="presentation">
         <a href="#nuevo" aria-controls="nuevo" role="tab" data-toggle="tab">
            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
            <span class="hidden-xs"> &nbsp; Nuevo plugin</span>
         </a>
      </li>
   </ul>

   <div class="tab-content">
      <div role="tabpanel" class='tab-pane{if condition="!$fsc->editar_plugin AND !$fsc->ver_plugin"} active{/if}' id="lista_plugins">
         <div class="table-responsive">
            <table class="table table-hover">
               <thead>
                  <tr>
                     <th class="text-left">Nick / Nombre</th>
                     <th class="text-left">Descripción</th>
                     <th class="text-right">Versión</th>
                     <th class="text-right">Estable</th>
                     <th class="text-right">Descargas</th>
                  </tr>
               </thead>
               {loop="$fsc->lista_plugins"}
               <tr class="clickableRow" href="{$value->url()}">
                  <td class="text-left"><a href="{$value->url()}">{$value->nick} / {$value->nombre}</a></td>
                  <td class="text-left">{$value->descripcion}</td>
                  <td class="text-right">{$value->version}</td>
                  <td class="text-right">{if condition="$value->estable"}Si{else}No{/if}</td>
                  <td class="text-right">{$value->descargas}</td>
               </tr>
               {else}
               <tr class="bg-warning">
                  <td colspan="5">Sin resultados</td>
               </tr>
               {/loop}
            </table>
         </div>
      </div>
      <div role="tabpanel" class='tab-pane' id="mis_plugins">
         <div class="table-responsive">
            <table class="table table-hover">
               <thead>
                  <tr>
                     <th class="text-left">Nombre</th>
                     <th class="text-left">Descripción</th>
                     <th class="text-right">Versión</th>
                     <th class="text-right">Estable</th>
                     <th class="text-right">Descargas</th>
                     <th class="text-right">Última modificación</th>
                  </tr>
               </thead>
               {loop="$fsc->mis_plugins"}
               <tr class="clickableRow" href="{$value->url()}">
                  <td class="text-left"><a href="{$value->url()}">{$value->nombre}</a></td>
                  <td class="text-left">{$value->descripcion}</td>
                  <td class="text-right">{$value->version}</td>
                  <td class="text-right">{if condition="$value->estable"}Si{else}No{/if}</td>
                  <td class="text-right">{$value->descargas}</td>
                  <td class="text-right">{$value->ultima_modificacion}</td>
               </tr>
               {else}
               <tr class="bg-warning">
                  <td colspan="6">Sin resultados</td>
               </tr>
               {/loop}
            </table>
         </div>
      </div>
      {if condition="$fsc->editar_plugin"}
      <div role="tabpanel" class="tab-pane{if condition="$fsc->editar_plugin"} active{/if}" id="editar">
         <form name="f_editar_plugin" class="form" action="{$fsc->url()}" method="post">
            <input type="hidden" name="id" value="{$fsc->editar_plugin->id}"/>
            <div class="container" style="margin-top: 10px;">
               <div class="row">
                  <div class="col-lg-12 col-md-12 text-center">
                     <h3>Editando plugin {$fsc->editar_plugin->nombre}</h3>
                  </div>
               </div>
               <div class="row">
                  <div class="col-lg-4 col-md-4">
                     <div class="form-group">
                        Nombre:
                        <input class="form-control" type="text" name="nombre" value="{$fsc->editar_plugin->nombre}" disabled="disabled"/>
                     </div>
                  </div>
                  <div class="col-lg-2 col-md-2">
                     <div class="form-group">
                        Versión:
                        <input class="form-control" type="number" name="version" value="{$fsc->editar_plugin->version}" autofocus/>
                     </div>
                  </div>
                  <div class="col-lg-2 col-md-2">
                     <div class="form-group">
                        Estable:
                        <select class="form-control" name="estable">
                           <option value="TRUE" {if condition="$fsc->editar_plugin->estable==1"}selected{/if}>Si</option>
                           <option value="FALSE" {if condition="$fsc->editar_plugin->estable==0"}selected{/if}>No</option>
                        </select>
                     </div>
                  </div>
                  <div class="col-lg-4 col-md-4">
                     <div class="form-group">
                        Última modificación:
                        <input class="form-control datepicker" type="text" name="ultima_modificacion" value="{$fsc->today()}" autocomplete="off"/>
                     </div>
                  </div>
               </div>
               <div class="row">
                  <div class="col-lg-12 col-md-12">
                     <div class="form-group">
                        Enlace:
                        <input class="form-control" type="text" name="link" value="{$fsc->editar_plugin->link}" autocomplete="off"/>
                     </div>
                  </div>
               </div>
               <div class="row">
                  <div class="col-lg-12 col-md-12">
                     <div class="form-group">
                        Descripción:
                        <textarea class="form-control" rows="4" name="descripcion">{$fsc->editar_plugin->descripcion}</textarea>
                     </div>
                  </div>
               </div>
               <div class="row">
                  <div class="col-lg-12 col-md-12">
                     <div class="text-right">
                        <a href="#" class="btn btn-sm btn-danger" onclick="delete_plugin('{$fsc->editar_plugin->id}')">
                           <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                           &nbsp; Eliminar
                        </a>
                        <button type="submit" class="btn btn-sm btn-primary">
                           <span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span>
                           &nbsp; Guardar
                        </button>
                     </div>
                  </div>
               </div>
            </div>
         </form>
      </div>
      {/if}
      {if condition="$fsc->ver_plugin"}
      <div role="tabpanel" class='tab-pane{if condition="$fsc->ver_plugin"} active{/if}' id="ver">
         <div class="container" style="margin-top: 10px;">
            <div class="row">
               <div class="col-lg-12 col-md-12 text-center">
                  <h3>Plugin {$fsc->ver_plugin->nombre}</h3>
               </div>
            </div>
            <div class="row">
               <div class="col-lg-4 col-md-4">
                  <div class="form-group">
                     <b>Autor:</b> {$fsc->ver_plugin->nick}
                  </div>
               </div>
               <div class="col-lg-2 col-md-2">
                  <div class="form-group">
                     <b>Versión:</b> {$fsc->ver_plugin->version}
                  </div>
               </div>
               <div class="col-lg-2 col-md-2">
                  <div class="form-group">
                     <b>Estable:</b> {if condition="$fsc->ver_plugin->estable"}Si{else}No{/if}
                  </div>
               </div>
               <div class="col-lg-4 col-md-4">
                  <div class="form-group">
                     <b>Última modificación:</b> {$fsc->ver_plugin->ultima_modificacion}
                  </div>
               </div>
            </div>
            <div class="row">
               <div class="col-lg-8 col-md-8">
                  <div class="form-group">
                     <b>Enlace:</b>
                     <a href="{$fsc->ver_plugin->link}">{$fsc->ver_plugin->link}</a>
                  </div>
               </div>
               <div class="col-lg-4 col-md-4">
                  <div class="form-group">
                     <b>Descargas:</b> {$fsc->ver_plugin->descargas}
                  </div>
               </div>
            </div>
            <div class="row">
               <div class="col-lg-12 col-md-12">
                  <div class="form-group">
                     <b>Descripción:</b>
                     
                     {$fsc->ver_plugin->descripcion}
                  </div>
               </div>
            </div>
         </div>
      </div>
      {/if}
      <div role="tabpanel" class="tab-pane" id="nuevo">
         <form name="f_nuevo_plugin" class="form" action="{$fsc->url()}" method="post">
            <div class="container" style="margin-top: 10px;">
               <div class="row">
                  <div class="col-lg-4 col-md-4">
                     <div class="form-group">
                        Nombre:
                        <input class="form-control" type="text" name="nombre" autocomplete="off" autofocus/>
                     </div>
                  </div>
                  <div class="col-lg-2 col-md-2">
                     <div class="form-group">
                        Versión:
                        <input class="form-control" type="number" name="version" value="1" />
                     </div>
                  </div>
                  <div class="col-lg-2 col-md-2">
                     <div class="form-group">
                        Estable:
                        <select class="form-control" name="estable">
                           <option value="TRUE" selected="selected">Si</option>
                           <option value="FALSE">No</option>
                        </select>
                     </div>
                  </div>
                  <div class="col-lg-4 col-md-4">
                     <div class="form-group">
                        Última modificación:
                        <input class="form-control datepicker" type="text" name="ultima_modificacion" value="{$fsc->today()}" autocomplete="off"/>
                     </div>
                  </div>
               </div>
               <div class="row">
                  <div class="col-lg-12 col-md-12">
                     <div class="form-group">
                        Enlace:
                        <input class="form-control" type="text" name="link" autocomplete="off"/>
                     </div>
                  </div>
               </div>
               <div class="row">
                  <div class="col-lg-12 col-md-12">
                     <div class="form-group">
                        Descripción:
                        <textarea class="form-control" name="descripcion" rows="4"></textarea>
                     </div>
                  </div>
               </div>
               <div class="row">
                  <div class="col-lg-12 col-md-12">
                     <div class="text-right">
                        <button type="submit" class="btn btn-sm btn-primary">
                           <span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span>
                           &nbsp; Guardar
                        </button>
                     </div>
                  </div>
               </div>
            </div>
      </div>
      </form>
   </div>
</div>

{include="footer"}